(()=>{"use strict";const e={WIDTH:1008,HEIGHT:624,BGCOLOR:"#110b3c",CELLSIZE:8,BLOCKWIDTH:16,NUMROWS:39,NUMCOLS:63,DIRECTIONS:{NORTH:0,SOUTH:2,EAST:1,WEST:3},PRIMSCOLORS:{0:"#f5fff9",.05:"#e4feef",.1:"#dbf7e7",.15:"#c9fade",.2:"#bcf7d6",.25:"#b2f6d0",.3:"#a9fcce",.35:"#98f5c1",.4:"#8effbf",.45:"#82fcb8",.5:"#7ffcb7",.55:"#66fca7",.6:"#55fb9d",.65:"#49ff98",.7:"#39f68b",.75:"#38fc8d",.8:"#30fb88",.85:"#27fb83",.9:"#1cfc7d",.95:"#1cfc7d",1:"#1cfc7d"},PROGRESS:2456};class t{constructor(e,t){this._canvas=e,this._ctx=t,this._draw={}}resetDraw(){this._draw={}}drawEdge(t,o,i){this._ctx.fillStyle=i||e.PRIMSCOLORS[o],this._ctx.fillRect((t._nodeFrom._x+t._nodeTo._x)/2,(t._nodeFrom._y+t._nodeTo._y)/2,e.CELLSIZE,e.CELLSIZE)}drawNode(o,i,n){const[s,r]=t.destructurePosition(o);this._ctx.fillStyle=n||e.PRIMSCOLORS[i],this._ctx.fillRect(s,r,e.CELLSIZE,e.CELLSIZE)}static destructurePosition(e){return"string"==typeof e?e.split(", "):[e._x,e._y]}}const o=t;class i{constructor(){this._collection=[]}}class n{constructor(t,o){this._x=t*e.BLOCKWIDTH,this._y=o*e.BLOCKWIDTH,this._neighbors=[],this._visited=!1,this._discovered=!1}}class s{constructor(e,t,o=Math.random()){this._nodeFrom=e,this._nodeTo=t,this._weight=o}}const r=class{constructor(e){this._ctx=e.getContext("2d"),this._draw=new o(e,this._ctx),this._graph=new i,this._frontier=[],this._tree={}}setupGrid(){const t=this._graph;for(let o=0;o<e.NUMROWS;o++){t._collection[o]=[];for(let i=0;i<e.NUMCOLS;i++)t._collection[o][i]=new n(i,o)}for(let o=0;o<e.NUMROWS;o++)for(let i=0;i<e.NUMCOLS;i++)o!==e.NUMROWS-1&&(t._collection[o][i]._neighbors[e.DIRECTIONS.SOUTH]=new s(t._collection[o][i],t._collection[o+1][i]),t._collection[o+1][i]._neighbors[e.DIRECTIONS.NORTH]=new s(t._collection[o+1][i],t._collection[o][i],t._collection[o][i]._neighbors[e.DIRECTIONS.SOUTH]._weight)),i!==e.NUMCOLS-1&&(t._collection[o][i]._neighbors[e.DIRECTIONS.EAST]=new s(t._collection[o][i],t._collection[o][i+1]),t._collection[o][i+1]._neighbors[e.DIRECTIONS.WEST]=new s(t._collection[o][i+1],t._collection[o][i],t._collection[o][i]._neighbors[e.DIRECTIONS.EAST]._weight))}prims(){let t=new s(null,null,1);for(let e=0;e<this._frontier.length;e++)this._frontier[e]._nodeFrom._discovered&&this._frontier[e]._nodeTo._discovered?this._frontier.splice(e,1):this._frontier[e]._weight<t._weight&&!this._frontier[e]._nodeTo._discovered&&(t=this._frontier[e]);t._nodeTo._discovered=!0,Object.values(e.DIRECTIONS).forEach((e=>{void 0===t._nodeTo._neighbors[e]||t._nodeTo._neighbors[e]._nodeTo._discovered||this._frontier.push(t._nodeTo._neighbors[e])}));const o=`${t._nodeFrom._x}, ${t._nodeFrom._y}`,i=`${t._nodeTo._x}, ${t._nodeTo._y}`;void 0===this._tree[o]?this._tree[o]=[[t,t._nodeTo]]:this._tree[o].push([t,t._nodeTo]),void 0===this._tree[i]?this._tree[i]=[[t,t._nodeFrom]]:this._tree[i].push([t,t._nodeFrom]);let n=Object.keys(this._tree).length/e.PROGRESS;n=(Math.ceil(20*n)/20).toFixed(2),this._draw.drawEdge(t,n),this._draw.drawNode(t._nodeTo,n)}build(){const t=this._graph._collection[0][0];this._graph._collection[0][0]._discovered=!0,this._draw.drawNode(t,null,e.PRIMSCOLORS[0]),this._frontier.push(this._graph._collection[0][0]._neighbors[e.DIRECTIONS.SOUTH]),this._frontier.push(this._graph._collection[0][0]._neighbors[e.DIRECTIONS.EAST]),this._tree.progress=0;const o=this,i=setInterval((function(){o.prims(),o._tree.progress+=1,o._tree.progress===e.PROGRESS&&clearInterval(i)}),0);return i}},_=document.getElementById("canvas"),c=_.getContext("2d");let l,d,h;function f(){c.fillStyle=e.BGCOLOR,c.fillRect(0,0,_.width,_.height),clearInterval(l),l=function(){const e=new r(_);e.setupGrid();const t=e.build();return d=e,h=e._tree,t}()}new o(_,c),_.width=e.WIDTH,_.height=e.HEIGHT,document.addEventListener("DOMContentLoaded",(()=>{document.getElementById("generate").addEventListener("click",f),f()}))})();